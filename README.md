# Задание

Требуется разработать приложение, реализующее видеоплеер со следующим функциональными элементами:
1. Видеоплеер
2. Поле для ввода http ссылки на видеофайл. 
3. Кнопка "Play/Pause" для приостановки/продолжения воспроизведения. 
4. Кнопка "Download", при нажатии на которую начинается загрузка текущего видеофайла с отображением прогресса загрузки.
 
При нажатии на кнопку "Play" начинается воспроизведение файла по URL, если он ещё не скачан.
После удачной загрузки при старте воспроизведения той же самой ссылки должен открываться уже загруженный файл. Можно не загружать файлы в формате m3u8, достаточно отобразить ошибку. Загрузка файла должна быть реализована без использования системного DownloadManager.

Язык разработки: Kotlin.

На что мы смотрим:
- Как работает приложение? Сообщает ли оно об ошибках?
- Архитектура. Разделены ли зоны ответственности? Какие используются зависимости? Оправдана ли их необходимость?
- Обработка ошибок.
- Тесты. Мы не занимаемся TDD и не гонимся за высоким уровнем покрытия тестами, но нам нравится легко тестируемый код. Необходимо принять решение, что и как стоит тестировать.
- Документация. Как документация в коде (там, где она нужна), так и краткий обзор принятых решений, механизма работы системы (readme). Это позволит нам понять ваш взгляд на проблему.

# Решение


### Summary

Видеоплеер был реализовани на базе ExoPlayer так как мощьное, с потдержкой множества форматов решение, а так же оно рекомендуется Google.
Для загрузки файлов была использована библиотека WorkManager. Он имеет прекрасное API, хорошую совместимость на всех платфомах, а так же продвигается Google как основное решение для выполнения задачь в фоне в отрыве от приложения.
Напрашивалось в использование готовая функциональность в ExoPlayer, так как там уже есть потдержка скачивания файлов из коробки с базой данных и удобным управлением.
Но так как она использует под капотом DownloadManager, а им по условиям задания пользоватся нельзя, написал свое решение.
Файлы сохраняю с именем из UUID + имя файла(взятое из url), для того что бы не было колизий и все имена файлов были уникальны.
Информацию о скаченых файлах сохраняю в SharedPreferences как ключь, значение. Где ключь это url, а значение имя файла.
Добавлена нотификация о прогрессе загрузки, где можно отменить загрузку.

### Улучшения
#### Возможности для улучшения которые я вижу, но они не были выполненны так как не входят в требования к заданию. По запросу без проблем могу выполнить если они критичны для проверки моих знаний.

- Одновременная множественная загрузка файлов
- Локализация ошибок (Сделал обработку ошибок по требованию в задании, но без локализации для пользователя сообщений об ошибке)
- UI/UX.
- Добавить больше clean architecture. К примеру избавится от контекста во ViewModel или обернуть SharedPreferences в Repository.
- Замена SharedPreferences на базу данных (дает большую скорость, а так же расширяемость для того что бы к примеру реализовать возможность приостановки загрузки)
- Востановления стейта после переворота экрана или убийства приложения
- Покрыть все тестами
- Добавить валидацию типов скаченых файлов (сейчас скачиваются все типы)
